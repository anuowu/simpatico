<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Simpatico: 2.2.5 Compiling (Out-of-Source)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Simpatico
   &#160;<span id="projectnumber">v1.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Simpatico - Simulation Package for Polymer and Molecular Liquids</a></li><li class="navelem"><a class="el" href="user_page.html">2 User Guide</a></li><li class="navelem"><a class="el" href="user_compile_page.html">2.2 Compiling</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">2.2.5 Compiling (Out-of-Source) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="user_compile_mpi_page.html">2.2.4 Configuring MPI</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="user_compile_insource_page.html">2.2.5 Compiling (In-Source)</a> (Next) <br />
</p>
<p>We recommend that most users perform an out-of-source build of simpatico. To compile simpatico out-of-source, after completing all of the required setup and configuration steps, one simply invokes the "make" utility with appropriate targets from the simpatico/ root directory. The <a class="el" href="user_compile_overview_page.html">overview of instructions</a> given on a previous page included instructions for compilng simpatico out-of-source. On this page, we simply repeat these instructions with a bit more explanation of what each makefile target should do.</p>
<h1><a class="anchor" id="compile_mcMd_section"></a>
Compiling mcSim and mdSim</h1>
<p>The first step in compiling simpatico should be to compile the single-processor versions of the mcSim and mdSim programs. Because these programs are standard C++ with no external dependencies, they can be compiled whether or not you have set up your environment for compiling MPI code, and generally compile with no difficulties. After setting environment variables, running the setup script, and making any desired changes in the configuration, simply cd to the simpatico/ root directory and then enter: </p><div class="fragment"><div class="line">&gt; make mcMd</div></div><!-- fragment --><p> This will:</p>
<ul>
<li>C compile a large number *.cpp files from the util/, simp/ and mcMd/ namespace-level subdirectories from the simpatico/src/ source code directory.</li>
<li>Install corresponding object (*.o) and dependency (*.d) files in corresponding subdiectories of the simpatico/bld/serial build directory.</li>
<li>Create a static library (with file extension *.a) in each of these three namespace-level subdirectories of the bld/serial directory.</li>
<li>Install executable files named mcSim and mdSim in the simpatico/bin directory.</li>
</ul>
<p>To recompile these programs after changing the configuration (e.g., after using the configure script to enable or disable compilation of particular features), simply reissue the "make mcMd" command. The build system will detect if you have changed any of the relevant configuration files, and will recompile any file that might be effected by such changes.</p>
<h1><a class="anchor" id="compile_mdPp_section"></a>
Compiling the mdPp post-processor</h1>
<p>The mdPp post-processor program is also a single-processor program that you can compile before setting up your system to compile MPI programs. To do so, cd to the simpatico/ root directory and enter: </p><div class="fragment"><div class="line">&gt; make tools</div></div><!-- fragment --><p> If this is done after compiling mcSim and mdSim, this will compile some additional code in src/tools directory, place *.o and *.d files in the simpatico/bld/serial/tools directory and install an executable named mdPp in the simpatico/bin directory.</p>
<h1><a class="anchor" id="compile_ddMd_section"></a>
Compiling ddSim</h1>
<p>To compile the ddSim parallel MD program, after setup, configuration of simpatico, and configuration of MPI, simply enter </p><div class="fragment"><div class="line">&gt; make ddMd</div></div><!-- fragment --><p> from the simpatico/ root directory. If successful, this will compile code from the util/, simp/, and ddMd/ subdirectories of the src/ directory, place object, dependency and library files in the simpatico/bld/parallel directory tree, and install an executable named ddSim in the simpatico/bin directory.</p>
<h1><a class="anchor" id="compile_multi_section"></a>
Compiling mcSim and mdSim (multi-processor versions)</h1>
<p>Multi-processor versions of mcSim and mdSim can be used to run:</p>
<ul>
<li>Multiple independent single-processor simulations as an MPI job, with completely separate input and output files</li>
<li>Multiple simulations with a sequence of parameter values specified in a single parameter file, using the perturbation feature.</li>
<li>Replica exchange simulations</li>
</ul>
<p>To compile multi-processor versions of mcSim and mdSim, enter: </p><div class="fragment"><div class="line">&gt; make mcMd-mpi</div></div><!-- fragment --><p> from the simpatico/ root directory. If invoked after compiling ddSim, this will compile MPI-enabled version of files in the mcMd/ directory, place the resulting object, dependency and library files in the bld/parallel/mcMd directory, and create executable files named mcSim_m and mdSim_m in the simpatico/bin/ directory. The suffix "_m" on these executable names denotes "MPI", and is used to distinguish multi-processor versions of the mcSim and mdSim executables from single processor versions.</p>
<h1><a class="anchor" id="compile_cleanup_section"></a>
Cleaning Up</h1>
<p>If, for any reason, you would like to clean up after compiling by removing all of the object, dependency and library files that are created during compilation, enter </p><div class="fragment"><div class="line">&gt; make clean</div></div><!-- fragment --><p> from the root directory. This will remove any files generated by compilation in the bld/serial, bld/parallel and src/ directories.</p>
<p>If you want to remove generated files from only one build directory (e.g., from bld/parallel, but not bld/serial or src/), simply enter "make clean" from the root of that build directory (e.g., from the bld/parallel directory), rather than from the simpatico/ root directory. Entering "make clean" from a namespace level subdirectory of any build directory will instead remove all generated files from that subdirectory, without effecting files in other subdirectories.</p>
<p>The "make clean" command removes files that are generated by compilation, but does not remove the various makefile fragments and C++ that were created by the "setup" script. To remove these files as well, and thus return the simpatico/ directory tree to a state as close as possible to the state it had immediately after it was cloned, instead enter </p><div class="fragment"><div class="line">&gt; make veryclean</div></div><!-- fragment --><p> from the simpatico/ root directory. Because this command removes files that are created by the setup script, you will need to invoke </p><div class="fragment"><div class="line">&gt; ./setup</div></div><!-- fragment --><p> after "make veryclean" before attempting to compile any code. Because this command restores default settings, you will also need to use the configure script to re-establish any desired non-default configuration choices before recompiling.</p>
<p><br />
 <a class="el" href="user_compile_mpi_page.html">2.2.4 Configuring MPI</a> (Prev) &#160; &#160; &#160; &#160; <a class="el" href="user_compile_page.html">2.2 Compiling</a> (Up) &#160; &#160; &#160; &#160; <a class="el" href="user_compile_insource_page.html">2.2.5 Compiling (In-Source)</a> (Next) </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.3-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 7 2018 12:59:45 for Simpatico by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
